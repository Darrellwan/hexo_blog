---
title: åœ¨ Cursor ä¸­æ‰“é€  MCP Serverï¼Œå¾å¯¦ä½œä¸­å­¸ç¿’ MCP
date: 2025-03-09 22:44:20
tags:
  - Cursor
  - MCP
  - Claude
page_type: post
description: Cursor å¯¦ä½œ MCP Server å­¸ç¿’ç­†è¨˜ï¼Œä¸€å€‹æ¨¡æ“¬çš„è”¬æœæŸ¥è©¢æƒ…å¢ƒï¼Œä¸¦ä¸”ç›´æ¥åœ¨ Claude Desktop å’Œ Cursor ä¸­ä½¿ç”¨ã€‚
categories: 
  - AI
bgImage: cursor_mcp_server_bg.jpg
preload:
  - cursor_mcp_server_bg.jpg
---

{% darrellImageCover cursor_mcp_server_bg cursor_mcp_server_bg.jpg max-800 %}

## ç‚ºä»€éº¼è¦å¯¦ä½œ MCP Server

[Claude Desktop MCP æ‡‰ç”¨æ¸¬è©¦å¿ƒå¾—](https://www.darrelltw.com/claude-desktop-new-mcp-features-review/)
ä¸Šä¸€ç¯‡æœ‰ç¨å¾®æåˆ° MCP çš„æ¦‚å¿µå’Œä½¿ç”¨
ä½†å­¸ç¿’æ™‚çœ‹åˆ°å¾ˆå¤šçš„æ–‡ä»¶ã€å½±ç‰‡
å¤§å®¶å°æ–¼ MCP éƒ½æœ‰ä¸€å¥—è‡ªå·±çš„è§£é‡‹å’Œæ¦‚å¿µ
æ‰€ä»¥å¾Œä¾†è¦ºå¾—ï¼Œé‚£å¯¦éš›é–‹ç™¼ä¸€å€‹è‡ªå·±çš„ MCP Server ç©ç©çœ‹æˆ–è¨±æ›´èƒ½ç†è§£!

æœ¬ç¯‡æ–‡ç« å°‡æ¡ç”¨ã€Œlearning by doingã€çš„æ–¹å¼ï¼Œå¾é›¶é–‹å§‹åœ¨ Cursor ä¸­æ‰“é€ ä¸€å€‹è”¬æœåƒ¹æ ¼æŸ¥è©¢ MCP Serverï¼Œä¸¦æœ€çµ‚åœ¨ Claude Desktop ä¸Šæ¸¬è©¦é©—è­‰ã€‚

## MCP çš„å®šç¾©

ä½ çœ‹åç¯‡æ–‡ç« ï¼Œå¯èƒ½æœƒæœ‰åç¨®é—œæ–¼ MCP çš„å®šç¾©æˆ–æ¯”å–»
ç›®å‰çš„å¿ƒå¾—æ˜¯ : **ä¸è¦æƒ³è¦æ‰¾å‡ºä¸€å€‹çœŸç†ï¼Œæœ‰å€‹æ¦‚å¿µå°±å¥½**

æˆ‘å€‹äººçš„å®šç¾©ç›®å‰å’Œé€™ç¯‡æ–‡ç« è¬›åˆ°çš„æ¯”è¼ƒæ¥è¿‘ï¼Œå°±æ˜¯é›»è…¦ USB çš„æ¦‚å¿µ

{% darrellImage800 mcp_usb_concept mcp_usb_concept.png max-800 %}

{% darrellImage800 what-is-model-context-protocol what-is-model-context-protocol.png max-800 %}

**å»ºè­°æœ‰èˆˆè¶£å¯ä»¥ç¿»é–±åŸæ–‡**

from [MCP vs API: Model Context Protocol Explained](https://norahsakal.com/blog/mcp-vs-api-model-context-protocol-explained/)

ä½ çš„é›»è…¦åŸæœ¬å°±åªæœ‰é›»è…¦çš„åŠŸèƒ½ï¼Œé›–ç„¶ä»–å·²ç¶“èƒ½åšå¾ˆå¤šäº‹æƒ…
ä½†ä½ æƒ³è¦æ‰“é›»å‹•ï¼Œä»–å°±æ˜¯æ²’æœ‰å…§å»ºæ–æ¡¿å°å§?
é€™æ™‚è²·äº†ä¸€å€‹æœ‰ USB æ¥é ­çš„æ–æ¡¿ï¼Œæ’ä¸Šå»å¾Œé›»è…¦å°±ç²å¾—ç”¨æ–æ¡¿æ‰“é›»å‹•çš„åŠŸèƒ½

å¦å¤–åƒæ˜¯ WebCAMã€éº¥å…‹é¢¨ã€éµç›¤ã€æ»‘é¼ ç­‰ç­‰ï¼Œéƒ½æ˜¯è³¦äºˆé›»è…¦æ–°çš„èƒ½åŠ›

## ç’°å¢ƒæº–å‚™

åœ¨é–‹å§‹é–‹ç™¼ MCP Server ä¹‹å‰ï¼Œå»ºè­°å…ˆå»ºç«‹ä¸€å€‹ Python è™›æ“¬ç’°å¢ƒï¼Œé€™æ¨£å¯ä»¥é¿å…å¥—ä»¶è¡çªä¸¦æ–¹ä¾¿ç®¡ç†ä¾è³´ï¼š

### å»ºç«‹è™›æ“¬ç’°å¢ƒ

ä½¿ç”¨ venv å»ºç«‹è™›æ“¬ç’°å¢ƒå’Œå•Ÿç”¨

```bash
python -m venv mcp-env
source mcp-env/bin/activate
```

å®‰è£å’Œæª¢æŸ¥ MCP

```bash
pip install "mcp[cli]"
mcp --version
```

## é–‹ç™¼è”¬æœåƒ¹æ ¼æŸ¥è©¢ MCP Server

æˆ‘å€‘å°‡ç›´æ¥å¾è”¬æœåƒ¹æ ¼æŸ¥è©¢æœå‹™é–‹å§‹ï¼Œå¯¦ç¾ä¸€å€‹å¯ä»¥æŸ¥è©¢å’Œæ¯”è¼ƒä¸åŒè”¬æœåƒ¹æ ¼çš„ MCP æœå‹™å™¨ã€‚

### 0.Cursorå­¸ç¿’æ–‡ä»¶

æˆ‘çš„åšæ³•æ˜¯å…ˆåˆ° Github ä¸Šçœ‹ MCP çš„ SDK æ–‡ä»¶
å…¶å¯¦ä¸æ˜¯æˆ‘çœ‹ï¼Œæˆ‘æ˜¯ä¸‹è¼‰ä¸‹ä¾†æº–å‚™çµ¦ Cursor çœ‹

[MCP Quick Start for Server Developers](https://github.com/modelcontextprotocol/python-sdk)

{% darrellImage800 cursor_mcp_server-server_developer_sdk cursor_mcp_server-server_developer_sdk.png max-800 %}

æˆ‘è‡ªå·±ä¸å¤ªç†Ÿ TypeScriptï¼Œæ‰€ä»¥å°±ç”¨ Python SDK

[Python MCP SDK](https://github.com/modelcontextprotocol/python-sdk)

{% darrellImage800 cursor_mcp_server-python_sdk_github cursor_mcp_server-python_sdk_github.png max-800 %}

æŠŠ readme ä¸‹è¼‰å¾Œä¸Ÿåˆ° Cursor çš„ Project ä¸­
ç„¶å¾Œç›´æ¥åœ¨ Agent è«‹ä»–å…ˆè®€å®Œé€™ä»½æ–‡ä»¶å¾Œ
å¹«æˆ‘å€‘åšä¸€å€‹ MCP Server ä¸¦ä¸”ç¤ºç¯„è”¬æœåƒ¹æ ¼çš„åŠŸèƒ½

ä¹Ÿå¯ä»¥è«‹ä»–åšå®Œå¯«ä¸‹è¨»è§£ï¼Œæˆ–æ˜¯ç”¨æ–‡å­—èªªæ˜ä»–åšäº†äº›ä»€éº¼

### 1.ç¨‹å¼ç¢¼

å»ºç«‹ä¸€å€‹ python:  `fruit_price_server.py`ï¼š

```python
from mcp.server.fastmcp import FastMCP, Context, Image
import json
import os
from datetime import datetime, timedelta
import random
import io
from typing import Dict, List, Optional
import urllib.parse  # æ·»åŠ  URL è§£ç¢¼åº«

# å˜—è©¦å°å…¥ matplotlibï¼Œä½†æä¾›å‚™é¸æ–¹æ¡ˆ
try:
    import matplotlib.pyplot as plt
    MATPLOTLIB_AVAILABLE = True
except ImportError:
    MATPLOTLIB_AVAILABLE = False
    print("è­¦å‘Šï¼šæœªå®‰è£ matplotlibï¼Œå°‡ä½¿ç”¨æ–‡å­—åœ–è¡¨æ›¿ä»£")

# å‰µå»ºä¸€å€‹ MCP æœå‹™å™¨
mcp = FastMCP("è”¬æœåƒ¹æ ¼æŸ¥è©¢")

# æ¨¡æ“¬åƒ¹æ ¼æ•¸æ“š
FRUITS = {
    "apple": {
        "zh_name": "è˜‹æœ",
        "current_price": 35.5,  # æ¯å…¬æ–¤åƒ¹æ ¼ï¼ˆå°å¹£ï¼‰
        "unit": "å…¬æ–¤",
        "prices": []  # æœ€è¿‘ 30 å¤©çš„åƒ¹æ ¼å°‡åœ¨åˆå§‹åŒ–æ™‚ç”Ÿæˆ
    },
    "banana": {
        "zh_name": "é¦™è•‰",
        "current_price": 28.0,  # æ¯å…¬æ–¤åƒ¹æ ¼ï¼ˆå°å¹£ï¼‰
        "unit": "å…¬æ–¤",
        "prices": []  # æœ€è¿‘ 30 å¤©çš„åƒ¹æ ¼å°‡åœ¨åˆå§‹åŒ–æ™‚ç”Ÿæˆ
    }
}

# å‰µå»ºä¸­æ–‡åç¨±åˆ°è‹±æ–‡åç¨±çš„æ˜ å°„
ZH_TO_EN = {
    "è˜‹æœ": "apple",
    "è‹¹æœ": "apple",  # ç°¡é«”å­—ä¹Ÿæ”¯æ´
    "é¦™è•‰": "banana"
}

# ç”Ÿæˆéå» 30 å¤©çš„åƒ¹æ ¼æ•¸æ“š
for fruit in FRUITS.values():
    base_price = fruit["current_price"]
    today = datetime.now()
    
    # ç‚ºæ¯ä¸€å¤©ç”Ÿæˆåƒ¹æ ¼
    for i in range(30):
        day = today - timedelta(days=29-i)
        # éš¨æ©Ÿæ³¢å‹•ï¼Œä½†ä¿æŒåœ¨ Â±15% ç¯„åœå…§
        price = base_price * (1 + random.uniform(-0.15, 0.15))
        fruit["prices"].append({
            "date": day.strftime("%Y-%m-%d"),
            "price": round(price, 1)
        })
    
    # ç¢ºä¿æœ€å¾Œä¸€å¤©çš„åƒ¹æ ¼æ˜¯ç•¶å‰åƒ¹æ ¼
    fruit["prices"][-1]["price"] = base_price

# æŸ¥æ‰¾è”¬æœçš„è¼”åŠ©å‡½æ•¸ï¼ˆæ”¯æ´ä¸­è‹±æ–‡åç¨±ï¼ŒåŒ…æ‹¬ URL ç·¨ç¢¼è™•ç†ï¼‰
def get_fruit_key(fruit_name: str) -> str:
    """æ ¹æ“šä¸­æ–‡æˆ–è‹±æ–‡åç¨±ç²å–è‹±æ–‡éµå€¼
    
    Args:
        fruit_name: è”¬æœåç¨±ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼Œå¯èƒ½æ˜¯ URL ç·¨ç¢¼çš„ï¼‰
    
    Returns:
        è‹±æ–‡éµå€¼æˆ– None
    """
    # å˜—è©¦ URL è§£ç¢¼ï¼Œä»¥æ”¯æ´ URL ç·¨ç¢¼çš„ä¸­æ–‡åç¨±
    try:
        decoded_name = urllib.parse.unquote(fruit_name)
        if decoded_name != fruit_name:
            print(f"è§£ç¢¼ URL ç·¨ç¢¼çš„åç¨±ï¼š{fruit_name} -> {decoded_name}")
            fruit_name = decoded_name
    except Exception as e:
        print(f"URL è§£ç¢¼å¤±æ•—ï¼š{e}")
    
    fruit_name = fruit_name.lower()
    
    # ç›´æ¥åŒ¹é…è‹±æ–‡åç¨±
    if fruit_name in FRUITS:
        return fruit_name
    
    # æŸ¥æ‰¾ä¸­æ–‡åç¨±æ˜ å°„
    if fruit_name in ZH_TO_EN:
        return ZH_TO_EN[fruit_name]
    
    return None

# å‰µå»ºæ¨™æº–è¡¨æ ¼æ ¼å¼çš„å‡½æ•¸
def create_table(dates, prices, title="åƒ¹æ ¼è¡¨", sample_size=10):
    """å‰µå»ºæ¨™æº–è¡¨æ ¼æ ¼å¼
    
    Args:
        dates: æ—¥æœŸåˆ—è¡¨
        prices: åƒ¹æ ¼åˆ—è¡¨
        title: è¡¨æ ¼æ¨™é¡Œ
        sample_size: è¦é¡¯ç¤ºçš„æ•¸æ“šé»æ•¸é‡
        
    Returns:
        è¡¨æ ¼å­—ç¬¦ä¸²
    """
    if not dates or not prices:
        return "ç„¡æ•¸æ“šå¯é¡¯ç¤º"
    
    # é¸æ“‡å‡å‹»åˆ†ä½ˆçš„æ¨£æœ¬é»
    sample_indices = []
    if len(dates) <= sample_size:
        sample_indices = list(range(len(dates)))
    else:
        step = len(dates) / sample_size
        for i in range(sample_size):
            sample_indices.append(int(i * step))
        # ç¢ºä¿åŒ…å«æœ€å¾Œä¸€å€‹é»
        if sample_indices[-1] != len(dates) - 1:
            sample_indices[-1] = len(dates) - 1
    
    # å‰µå»ºè¡¨é ­
    table = f"ã€{title}ã€‘\n"
    table += "+--------------+--------------+\n"
    table += "| æ—¥æœŸ         | åƒ¹æ ¼ (å…ƒ/å…¬æ–¤) |\n"
    table += "+--------------+--------------+\n"
    
    # æ·»åŠ æ•¸æ“šè¡Œ
    for i in sample_indices:
        date = dates[i]
        price = prices[i]
        table += f"| {date} | {price:12.1f} |\n"
    
    table += "+--------------+--------------+\n"
    
    # æ·»åŠ åƒ¹æ ¼è¶¨å‹¢æè¿°
    price_trend = _get_price_trend_description(prices)
    table += f"åƒ¹æ ¼è¶¨å‹¢: {price_trend}\n"
    
    return table

# å‰µå»ºåƒ¹æ ¼æ¯”è¼ƒè¡¨æ ¼
def create_comparison_table(dates, prices1, prices2, fruit1_name, fruit2_name, sample_size=8):
    """å‰µå»ºå…©ç¨®è”¬æœåƒ¹æ ¼æ¯”è¼ƒè¡¨æ ¼
    
    Args:
        dates: æ—¥æœŸåˆ—è¡¨
        prices1: ç¬¬ä¸€ç¨®è”¬æœåƒ¹æ ¼åˆ—è¡¨
        prices2: ç¬¬äºŒç¨®è”¬æœåƒ¹æ ¼åˆ—è¡¨
        fruit1_name: ç¬¬ä¸€ç¨®è”¬æœåç¨±
        fruit2_name: ç¬¬äºŒç¨®è”¬æœåç¨±
        sample_size: è¦é¡¯ç¤ºçš„æ•¸æ“šé»æ•¸é‡
        
    Returns:
        æ¯”è¼ƒè¡¨æ ¼å­—ç¬¦ä¸²
    """
    if not dates or not prices1 or not prices2:
        return "ç„¡æ•¸æ“šå¯é¡¯ç¤º"
    
    # é¸æ“‡å‡å‹»åˆ†ä½ˆçš„æ¨£æœ¬é»
    sample_indices = []
    if len(dates) <= sample_size:
        sample_indices = list(range(len(dates)))
    else:
        step = len(dates) / sample_size
        for i in range(sample_size):
            sample_indices.append(int(i * step))
        # ç¢ºä¿åŒ…å«æœ€å¾Œä¸€å€‹é»
        if sample_indices[-1] != len(dates) - 1:
            sample_indices[-1] = len(dates) - 1
    
    # å‰µå»ºè¡¨é ­
    table = f"ã€{fruit1_name} vs {fruit2_name} åƒ¹æ ¼æ¯”è¼ƒã€‘\n"
    table += "+--------------+--------------+--------------+--------------+\n"
    table += f"| æ—¥æœŸ         | {fruit1_name:12} | {fruit2_name:12} | å·®ç•° (å…ƒ/å…¬æ–¤) |\n"
    table += "+--------------+--------------+--------------+--------------+\n"
    
    # æ·»åŠ æ•¸æ“šè¡Œ
    for i in sample_indices:
        date = dates[i]
        price1 = prices1[i]
        price2 = prices2[i]
        diff = price1 - price2
        table += f"| {date} | {price1:12.1f} | {price2:12.1f} | {diff:+12.1f} |\n"
    
    table += "+--------------+--------------+--------------+--------------+\n"
    
    # æ·»åŠ ç¸½çµ
    avg_price1 = sum(prices1) / len(prices1)
    avg_price2 = sum(prices2) / len(prices2)
    avg_diff = avg_price1 - avg_price2
    
    table += f"å¹³å‡åƒ¹æ ¼:       | {avg_price1:12.1f} | {avg_price2:12.1f} | {avg_diff:+12.1f} |\n"
    table += "+--------------+--------------+--------------+--------------+\n"
    
    return table

# åƒ¹æ ¼è¶¨å‹¢çš„æ–‡å­—æè¿°å‡½æ•¸
def _get_price_trend_description(prices):
    """æ ¹æ“šåƒ¹æ ¼æ•¸æ“šæä¾›è¶¨å‹¢æè¿°
    
    Args:
        prices: åƒ¹æ ¼åˆ—è¡¨
        
    Returns:
        è¶¨å‹¢æè¿°å­—ç¬¦ä¸²
    """
    if len(prices) < 2:
        return "æ•¸æ“šä¸è¶³ä»¥åˆ†æè¶¨å‹¢"
    
    # è¨ˆç®—åƒ¹æ ¼è®ŠåŒ–
    changes = []
    for i in range(1, len(prices)):
        changes.append(prices[i] - prices[i-1])
    
    # è¨ˆç®—ä¸Šæ¼²ã€ä¸‹è·Œå’ŒæŒå¹³çš„æ¬¡æ•¸
    up_count = sum(1 for change in changes if change > 0)
    down_count = sum(1 for change in changes if change < 0)
    flat_count = sum(1 for change in changes if change == 0)
    
    # è¨ˆç®—èµ·å§‹å’ŒçµæŸåƒ¹æ ¼çš„è®ŠåŒ–
    start_price = prices[0]
    end_price = prices[-1]
    total_change = end_price - start_price
    percent_change = (total_change / start_price) * 100
    
    # ç”Ÿæˆæè¿°
    description = ""
    
    # ç¸½é«”è¶¨å‹¢
    if percent_change > 10:
        description += "å¤§å¹…ä¸Šæ¼²"
    elif percent_change > 5:
        description += "æ˜é¡¯ä¸Šæ¼²"
    elif percent_change > 0:
        description += "å°å¹…ä¸Šæ¼²"
    elif percent_change < -10:
        description += "å¤§å¹…ä¸‹è·Œ"
    elif percent_change < -5:
        description += "æ˜é¡¯ä¸‹è·Œ"
    elif percent_change < 0:
        description += "å°å¹…ä¸‹è·Œ"
    else:
        description += "åŸºæœ¬æŒå¹³"
    
    description += f" ({percent_change:+.1f}%)"
    
    # æ³¢å‹•æƒ…æ³
    if up_count > 0.7 * len(changes):
        description += "ï¼ŒæŒçºŒä¸Šæ¼²è¶¨å‹¢"
    elif down_count > 0.7 * len(changes):
        description += "ï¼ŒæŒçºŒä¸‹è·Œè¶¨å‹¢"
    elif up_count > down_count and up_count > flat_count:
        description += "ï¼Œæœ‰æ³¢å‹•ä½†ç¸½é«”å‘ä¸Š"
    elif down_count > up_count and down_count > flat_count:
        description += "ï¼Œæœ‰æ³¢å‹•ä½†ç¸½é«”å‘ä¸‹"
    else:
        description += "ï¼Œæ³¢å‹•è¼ƒå¤§"
    
    return description

# ç²å–è”¬æœåˆ—è¡¨çš„è³‡æº
@mcp.resource("fruits://list")
def list_fruits() -> str:
    """ç²å–æ‰€æœ‰å¯æŸ¥è©¢çš„è”¬æœåˆ—è¡¨"""
    result = "å¯æŸ¥è©¢çš„è”¬æœï¼š\n"
    result += "+----------+--------------+--------------+\n"
    result += "| è”¬æœåç¨± | è‹±æ–‡åç¨±     | ç›®å‰åƒ¹æ ¼     |\n"
    result += "+----------+--------------+--------------+\n"
    
    for key, fruit in FRUITS.items():
        result += f"| {fruit['zh_name']:8} | {key:12} | {fruit['current_price']:10.1f} å…ƒ/{fruit['unit']} |\n"
    
    result += "+----------+--------------+--------------+\n"
    result += "\næ‚¨å¯ä»¥é€šéä»¥ä¸‹æ–¹å¼æŸ¥è©¢è©³ç´°è³‡è¨Šï¼š\n"
    result += "1. è®€å–è³‡æº: fruits://è˜‹æœ æˆ– fruits://apple\n"
    result += "2. ä½¿ç”¨å·¥å…·: get_price_chartã€compare_prices æˆ– analyze_price_trend\n"
    
    return result

# ç²å–ç‰¹å®šè”¬æœè³‡è¨Šçš„è³‡æº
@mcp.resource("fruits://{fruit_name}")
def get_fruit_info(fruit_name: str) -> str:
    """ç²å–ç‰¹å®šè”¬æœçš„åŸºæœ¬è³‡è¨Š
    
    Args:
        fruit_name: è”¬æœåç¨±ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼Œå¦‚ appleã€è˜‹æœã€bananaã€é¦™è•‰ï¼‰
    
    Returns:
        è”¬æœè³‡è¨Š
    """
    fruit_key = get_fruit_key(fruit_name)
    if not fruit_key:
        return f"æ‰¾ä¸åˆ° {fruit_name} çš„è³‡è¨Šï¼Œæ”¯æ´çš„è”¬æœæœ‰ï¼š" + "ã€".join([f"{f['zh_name']}({k})" for k, f in FRUITS.items()])
    
    fruit = FRUITS[fruit_key]
    prices_data = [item["price"] for item in fruit["prices"]]
    dates = [item["date"] for item in fruit["prices"]]
    
    result = f"ã€{fruit['zh_name']}ã€‘åŸºæœ¬è³‡è¨Š\n\n"
    result += f"ç›®å‰åƒ¹æ ¼: {fruit['current_price']} å…ƒ/{fruit['unit']}\n"
    result += f"30å¤©æœ€é«˜åƒ¹: {max(prices_data)} å…ƒ/{fruit['unit']}\n"
    result += f"30å¤©æœ€ä½åƒ¹: {min(prices_data)} å…ƒ/{fruit['unit']}\n"
    result += f"30å¤©å¹³å‡åƒ¹: {sum(prices_data)/len(prices_data):.1f} å…ƒ/{fruit['unit']}\n"
    result += f"è¿‘æœŸèµ°å‹¢: {_price_trend_description(fruit['prices'])}\n\n"
    
    # æ·»åŠ æ¨™æº–è¡¨æ ¼
    result += create_table(dates, prices_data, f"{fruit['zh_name']}éå»30å¤©åƒ¹æ ¼è¡¨")
    
    return result

# ç²å–ç‰¹å®šè”¬æœåƒ¹æ ¼èµ°å‹¢åœ–çš„å·¥å…·
@mcp.tool()
def get_price_chart(fruit_name: str, days: int = 30) -> str:
    """ç²å–ç‰¹å®šè”¬æœçš„åƒ¹æ ¼èµ°å‹¢åœ–
    
    Args:
        fruit_name: è”¬æœåç¨±ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼Œå¦‚ appleã€è˜‹æœã€bananaã€é¦™è•‰ï¼‰
        days: è¦é¡¯ç¤ºçš„å¤©æ•¸ï¼Œæœ€å¤š30å¤©
    
    Returns:
        åƒ¹æ ¼èµ°å‹¢åœ–ï¼ˆè¡¨æ ¼ç‰ˆï¼‰
    """
    fruit_key = get_fruit_key(fruit_name)
    if not fruit_key:
        return f"æ‰¾ä¸åˆ° {fruit_name} çš„è³‡è¨Šï¼Œæ”¯æ´çš„è”¬æœæœ‰ï¼š" + "ã€".join([f"{f['zh_name']}({k})" for k, f in FRUITS.items()])
    
    fruit = FRUITS[fruit_key]
    zh_name = fruit['zh_name']
    
    # é™åˆ¶å¤©æ•¸æœ€å¤š 30 å¤©
    days = min(days, 30)
    
    # ç²å–åƒ¹æ ¼æ•¸æ“š
    price_data = fruit["prices"][-days:]
    dates = [item["date"] for item in price_data]
    prices = [item["price"] for item in price_data]
    
    # è¨ˆç®—é‡è¦çµ±è¨ˆæ•¸æ“š
    current_price = prices[-1]
    avg_price = sum(prices) / len(prices)
    max_price = max(prices)
    min_price = min(prices)
    max_change = max([abs(prices[i] - prices[i-1]) for i in range(1, len(prices))])
    
    # ç”Ÿæˆè©³ç´°å ±å‘Š
    result = f"ã€{zh_name}éå»{days}å¤©åƒ¹æ ¼åˆ†æã€‘\n\n"
    
    # çµ±è¨ˆæ‘˜è¦
    result += "åƒ¹æ ¼çµ±è¨ˆæ‘˜è¦ï¼š\n"
    result += "+----------------+----------------+\n"
    result += "| æŒ‡æ¨™           | æ•¸å€¼           |\n"
    result += "+----------------+----------------+\n"
    result += f"| ç•¶å‰åƒ¹æ ¼       | {current_price:14.1f} |\n"
    result += f"| å¹³å‡åƒ¹æ ¼       | {avg_price:14.1f} |\n"
    result += f"| æœ€é«˜åƒ¹æ ¼       | {max_price:14.1f} |\n"
    result += f"| æœ€ä½åƒ¹æ ¼       | {min_price:14.1f} |\n"
    result += f"| æœ€å¤§å–®æ—¥æ³¢å‹•   | {max_change:14.1f} |\n"
    result += "+----------------+----------------+\n\n"
    
    # æ·»åŠ è©³ç´°åƒ¹æ ¼è¡¨
    result += "è©³ç´°åƒ¹æ ¼æ•¸æ“šï¼ˆæ¡æ¨£é¡¯ç¤ºï¼‰ï¼š\n"
    result += create_table(dates, prices, f"{zh_name}åƒ¹æ ¼è¡¨", sample_size=10)
    
    # æ·»åŠ åƒ¹æ ¼è®ŠåŒ–æè¿°
    change_from_start = prices[-1] - prices[0]
    percent_change = (change_from_start / prices[0]) * 100
    
    result += f"\nåƒ¹æ ¼èµ°å‹¢æè¿°ï¼š\n"
    result += f"- å¾ {dates[0]} åˆ° {dates[-1]} æœŸé–“ï¼Œ{zh_name}åƒ¹æ ¼"
    
    if change_from_start > 0:
        result += f"ä¸Šæ¼²äº† {change_from_start:.1f} å…ƒ (+{percent_change:.1f}%)"
    elif change_from_start < 0:
        result += f"ä¸‹è·Œäº† {-change_from_start:.1f} å…ƒ ({percent_change:.1f}%)"
    else:
        result += "ä¿æŒä¸è®Š"
    
    result += "ã€‚\n"
    
    # æ·»åŠ æ³¢å‹•åˆ†æ
    above_avg = sum(1 for p in prices if p > avg_price)
    below_avg = sum(1 for p in prices if p < avg_price)
    
    result += f"- åœ¨é€™ {days} å¤©ä¸­ï¼Œåƒ¹æ ¼æœ‰ {above_avg} å¤©é«˜æ–¼å¹³å‡åƒ¹ï¼Œ{below_avg} å¤©ä½æ–¼å¹³å‡åƒ¹ã€‚\n"
    
    # é€±æœŸæ€§è®ŠåŒ–åˆ†æ
    if days >= 14:
        week1_avg = sum(prices[:7]) / 7
        week2_avg = sum(prices[7:14]) / 7
        week_change = ((week2_avg / week1_avg) - 1) * 100
        
        result += f"- ç¬¬äºŒé€±è¼ƒç¬¬ä¸€é€±å¹³å‡åƒ¹æ ¼è®ŠåŒ–ï¼š{week_change:+.1f}%\n"
    
    if days >= 21:
        week3_avg = sum(prices[14:21]) / 7
        result += f"- ç¬¬ä¸‰é€±è¼ƒç¬¬äºŒé€±å¹³å‡åƒ¹æ ¼è®ŠåŒ–ï¼š{((week3_avg / week2_avg) - 1) * 100:+.1f}%\n"
    
    # é æ¸¬è¶¨å‹¢
    if percent_change > 5:
        result += "- é æ¸¬ï¼šè‹¥ç•¶å‰è¶¨å‹¢æŒçºŒï¼ŒçŸ­æœŸå…§åƒ¹æ ¼å¯èƒ½ç¹¼çºŒä¸Šæ¼²ã€‚\n"
    elif percent_change < -5:
        result += "- é æ¸¬ï¼šè‹¥ç•¶å‰è¶¨å‹¢æŒçºŒï¼ŒçŸ­æœŸå…§åƒ¹æ ¼å¯èƒ½ç¹¼çºŒä¸‹è·Œã€‚\n"
    else:
        result += "- é æ¸¬ï¼šåƒ¹æ ¼å¯èƒ½åœ¨ç•¶å‰æ°´å¹³é™„è¿‘æ³¢å‹•ã€‚\n"
    
    return result

# æ¯”è¼ƒå…©ç¨®è”¬æœåƒ¹æ ¼çš„å·¥å…·
@mcp.tool()
def compare_prices(fruit1: str, fruit2: str, days: int = 30) -> str:
    """æ¯”è¼ƒå…©ç¨®è”¬æœçš„åƒ¹æ ¼èµ°å‹¢
    
    Args:
        fruit1: ç¬¬ä¸€ç¨®è”¬æœåç¨±ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼Œå¦‚ appleã€è˜‹æœï¼‰
        fruit2: ç¬¬äºŒç¨®è”¬æœåç¨±ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼Œå¦‚ bananaã€é¦™è•‰ï¼‰
        days: è¦æ¯”è¼ƒçš„å¤©æ•¸ï¼Œæœ€å¤š30å¤©
    
    Returns:
        æ¯”è¼ƒçµæœï¼ˆè¡¨æ ¼ç‰ˆï¼‰
    """
    fruit_key1 = get_fruit_key(fruit1)
    fruit_key2 = get_fruit_key(fruit2)
    
    if not fruit_key1 or not fruit_key2:
        error_msg = []
        if not fruit_key1:
            error_msg.append(f"æ‰¾ä¸åˆ° {fruit1} çš„è³‡è¨Š")
        if not fruit_key2:
            error_msg.append(f"æ‰¾ä¸åˆ° {fruit2} çš„è³‡è¨Š")
        error_msg.append("æ”¯æ´çš„è”¬æœæœ‰ï¼š" + "ã€".join([f"{f['zh_name']}({k})" for k, f in FRUITS.items()]))
        return "\n".join(error_msg)
    
    # é™åˆ¶å¤©æ•¸æœ€å¤š 30 å¤©
    days = min(days, 30)
    
    # ç²å–åƒ¹æ ¼æ•¸æ“š
    price_data1 = FRUITS[fruit_key1]["prices"][-days:]
    price_data2 = FRUITS[fruit_key2]["prices"][-days:]
    
    dates = [item["date"] for item in price_data1]
    prices1 = [item["price"] for item in price_data1]
    prices2 = [item["price"] for item in price_data2]
    
    fruit1_name = FRUITS[fruit_key1]["zh_name"]
    fruit2_name = FRUITS[fruit_key2]["zh_name"]
    
    # è¨ˆç®—åƒ¹æ ¼å·®ç•°
    current_diff = prices1[-1] - prices2[-1]
    avg_diff = sum(p1 - p2 for p1, p2 in zip(prices1, prices2)) / len(prices1)
    
    # ç”Ÿæˆæ¯”è¼ƒå ±å‘Š
    result = f"ã€{fruit1_name} vs {fruit2_name} åƒ¹æ ¼æ¯”è¼ƒåˆ†æã€‘\n\n"
    
    # ç¸½çµæ•¸æ“š
    result += "åƒ¹æ ¼æ¯”è¼ƒæ‘˜è¦ï¼š\n"
    result += "+----------------+----------------+----------------+----------------+\n"
    result += f"| æŒ‡æ¨™           | {fruit1_name:14} | {fruit2_name:14} | å·®ç•°           |\n"
    result += "+----------------+----------------+----------------+----------------+\n"
    result += f"| ç•¶å‰åƒ¹æ ¼       | {prices1[-1]:14.1f} | {prices2[-1]:14.1f} | {current_diff:+14.1f} |\n"
    result += f"| å¹³å‡åƒ¹æ ¼       | {sum(prices1)/len(prices1):14.1f} | {sum(prices2)/len(prices2):14.1f} | {avg_diff:+14.1f} |\n"
    result += f"| æœ€é«˜åƒ¹æ ¼       | {max(prices1):14.1f} | {max(prices2):14.1f} | {max(prices1)-max(prices2):+14.1f} |\n"
    result += f"| æœ€ä½åƒ¹æ ¼       | {min(prices1):14.1f} | {min(prices2):14.1f} | {min(prices1)-min(prices2):+14.1f} |\n"
    result += "+----------------+----------------+----------------+----------------+\n\n"
    
    # æ·»åŠ åƒ¹æ ¼æ¯”è¼ƒè¡¨æ ¼
    result += "åƒ¹æ ¼å°æ¯”è©³ç´°æ•¸æ“šï¼š\n"
    result += create_comparison_table(dates, prices1, prices2, fruit1_name, fruit2_name)
    
    # æ·»åŠ æ¯”è¼ƒåˆ†æ
    result += f"\nåƒ¹æ ¼æ¯”è¼ƒåˆ†æï¼š\n"
    
    # åƒ¹æ ¼å·®ç•°åˆ†æ
    if current_diff > 0:
        result += f"- ç›®å‰ {fruit1_name} æ¯” {fruit2_name} è²´ {current_diff:.1f} å…ƒ ({(current_diff/prices2[-1])*100:.1f}%)ã€‚\n"
    else:
        result += f"- ç›®å‰ {fruit1_name} æ¯” {fruit2_name} ä¾¿å®œ {-current_diff:.1f} å…ƒ ({(current_diff/prices2[-1])*100:.1f}%)ã€‚\n"
    
    # åƒ¹æ ¼è¶¨å‹¢æ¯”è¼ƒ
    f1_change = ((prices1[-1] / prices1[0]) - 1) * 100
    f2_change = ((prices2[-1] / prices2[0]) - 1) * 100
    
    result += f"- {fruit1_name}éå»{days}å¤©åƒ¹æ ¼è®ŠåŒ–ï¼š{f1_change:+.1f}%\n"
    result += f"- {fruit2_name}éå»{days}å¤©åƒ¹æ ¼è®ŠåŒ–ï¼š{f2_change:+.1f}%\n"
    
    # ç›¸é—œæ€§åˆ†æ
    if (f1_change > 0 and f2_change > 0) or (f1_change < 0 and f2_change < 0):
        result += f"- å…©ç¨®è”¬æœåƒ¹æ ¼èµ°å‹¢æ–¹å‘ä¸€è‡´ï¼Œä½† {fruit1_name if abs(f1_change) > abs(f2_change) else fruit2_name} è®ŠåŒ–å¹…åº¦æ›´å¤§ã€‚\n"
    else:
        result += f"- å…©ç¨®è”¬æœåƒ¹æ ¼èµ°å‹¢æ–¹å‘ç›¸åï¼Œ{fruit1_name} {('ä¸Šæ¼²' if f1_change > 0 else 'ä¸‹è·Œ')}è€Œ {fruit2_name} {('ä¸‹è·Œ' if f2_change > 0 else 'ä¸Šæ¼²')}ã€‚\n"
    
    # è³¼è²·å»ºè­°
    result += "\nè³¼è²·å»ºè­°ï¼š\n"
    if current_diff < 0:
        result += f"- å¦‚æœå£å‘³åå¥½ç›¸è¿‘ï¼Œç›®å‰ {fruit1_name} æ€§åƒ¹æ¯”æ›´é«˜ã€‚\n"
    else:
        result += f"- å¦‚æœå£å‘³åå¥½ç›¸è¿‘ï¼Œç›®å‰ {fruit2_name} æ€§åƒ¹æ¯”æ›´é«˜ã€‚\n"
    
    if f1_change < 0 and f1_change < f2_change:
        result += f"- {fruit1_name}åƒ¹æ ¼æ­£åœ¨ä¸‹è·Œï¼Œå¯èƒ½æ˜¯è¼ƒå¥½çš„è³¼è²·æ™‚æ©Ÿã€‚\n"
    elif f2_change < 0 and f2_change < f1_change:
        result += f"- {fruit2_name}åƒ¹æ ¼æ­£åœ¨ä¸‹è·Œï¼Œå¯èƒ½æ˜¯è¼ƒå¥½çš„è³¼è²·æ™‚æ©Ÿã€‚\n"
    
    return result

# ç²å–åƒ¹æ ¼èµ°å‹¢åˆ†æçš„å·¥å…·
@mcp.tool()
def analyze_price_trend(fruit_name: str) -> str:
    """ç²å–ç‰¹å®šè”¬æœçš„åƒ¹æ ¼èµ°å‹¢åˆ†æ
    
    Args:
        fruit_name: è”¬æœåç¨±ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼Œå¦‚ appleã€è˜‹æœã€bananaã€é¦™è•‰ï¼‰
    
    Returns:
        åƒ¹æ ¼èµ°å‹¢åˆ†æå ±å‘Š
    """
    fruit_key = get_fruit_key(fruit_name)
    if not fruit_key:
        return f"æ‰¾ä¸åˆ° {fruit_name} çš„è³‡è¨Šï¼Œæ”¯æ´çš„è”¬æœæœ‰ï¼š" + "ã€".join([f"{f['zh_name']}({k})" for k, f in FRUITS.items()])
    
    fruit = FRUITS[fruit_key]
    prices_data = fruit["prices"]
    prices = [item["price"] for item in prices_data]
    dates = [item["date"] for item in prices_data]
    
    # è¨ˆç®—å¹³å‡åƒ¹æ ¼
    avg_price = sum(prices) / len(prices)
    
    # è¨ˆç®—ç’°æ¯”è®ŠåŒ–
    current_price = prices[-1]
    week_ago_price = prices[-8] if len(prices) >= 8 else prices[0]
    two_weeks_ago_price = prices[-15] if len(prices) >= 15 else prices[0]
    month_ago_price = prices[0]
    
    week_change = ((current_price / week_ago_price) - 1) * 100
    two_weeks_change = ((current_price / two_weeks_ago_price) - 1) * 100
    month_change = ((current_price / month_ago_price) - 1) * 100
    
    # è¨ˆç®—æ³¢å‹•æ€§ï¼ˆæ¨™æº–å·®ï¼‰
    variance = sum((price - avg_price) ** 2 for price in prices) / len(prices)
    std_dev = variance ** 0.5
    volatility = (std_dev / avg_price) * 100
    
    # åˆ¤æ–·è¶¨å‹¢
    trend_description = _price_trend_description(prices_data)
    
    # çµ„åˆå ±å‘Š
    report = f"ã€{fruit['zh_name']}åƒ¹æ ¼åˆ†æå ±å‘Šã€‘\n\n"
    
    # åŸºæœ¬çµ±è¨ˆè¡¨
    report += "åƒ¹æ ¼åŸºæœ¬çµ±è¨ˆï¼š\n"
    report += "+----------------+----------------+\n"
    report += "| æŒ‡æ¨™           | æ•¸å€¼           |\n"
    report += "+----------------+----------------+\n"
    report += f"| ç•¶å‰åƒ¹æ ¼       | {current_price:14.1f} |\n"
    report += f"| 30å¤©å¹³å‡åƒ¹æ ¼   | {avg_price:14.1f} |\n"
    report += f"| 30å¤©æœ€é«˜åƒ¹æ ¼   | {max(prices):14.1f} |\n"
    report += f"| 30å¤©æœ€ä½åƒ¹æ ¼   | {min(prices):14.1f} |\n"
    report += f"| åƒ¹æ ¼æ³¢å‹•æ€§     | {volatility:14.1f}% |\n"
    report += "+----------------+----------------+\n\n"
    
    # ç’°æ¯”è®ŠåŒ–è¡¨
    report += "åƒ¹æ ¼ç’°æ¯”è®ŠåŒ–ï¼š\n"
    report += "+----------------+----------------+\n"
    report += "| æ™‚é–“ç¯„åœ       | è®ŠåŒ–ç™¾åˆ†æ¯”     |\n"
    report += "+----------------+----------------+\n"
    report += f"| ä¸€é€±ç’°æ¯”       | {week_change:+14.1f}% |\n"
    report += f"| å…©é€±ç’°æ¯”       | {two_weeks_change:+14.1f}% |\n"
    report += f"| æœˆåº¦ç’°æ¯”       | {month_change:+14.1f}% |\n"
    report += "+----------------+----------------+\n\n"
    
    # æ·»åŠ è©³ç´°åƒ¹æ ¼è¡¨æ ¼
    report += "30å¤©åƒ¹æ ¼æ•¸æ“šï¼ˆæ¡æ¨£é¡¯ç¤ºï¼‰ï¼š\n"
    report += create_table(dates, prices, f"{fruit['zh_name']}åƒ¹æ ¼è¡¨")
    
    # åƒ¹æ ¼è¶¨å‹¢æè¿°
    report += f"\nåƒ¹æ ¼è¶¨å‹¢åˆ†æï¼š\n"
    report += f"- ç¸½é«”è¶¨å‹¢ï¼š{trend_description}\n"
    
    # åˆ†æ®µè¶¨å‹¢åˆ†æ
    if len(prices) >= 21:
        early_prices = prices[:10]
        mid_prices = prices[10:20]
        late_prices = prices[20:]
        
        early_avg = sum(early_prices) / len(early_prices)
        mid_avg = sum(mid_prices) / len(mid_prices)
        late_avg = sum(late_prices) / len(late_prices)
        
        report += "- åˆ†æ®µè¶¨å‹¢åˆ†æï¼š\n"
        report += f"  * åˆæœŸï¼ˆ{dates[0]} ~ {dates[9]}ï¼‰ï¼šå¹³å‡åƒ¹æ ¼ {early_avg:.1f} å…ƒ\n"
        report += f"  * ä¸­æœŸï¼ˆ{dates[10]} ~ {dates[19]}ï¼‰ï¼šå¹³å‡åƒ¹æ ¼ {mid_avg:.1f} å…ƒï¼Œè¼ƒåˆæœŸè®ŠåŒ– {((mid_avg/early_avg)-1)*100:+.1f}%\n"
        report += f"  * å¾ŒæœŸï¼ˆ{dates[20]} ~ {dates[-1]}ï¼‰ï¼šå¹³å‡åƒ¹æ ¼ {late_avg:.1f} å…ƒï¼Œè¼ƒä¸­æœŸè®ŠåŒ– {((late_avg/mid_avg)-1)*100:+.1f}%\n"
    
    # é æ¸¬åˆ†æ
    report += "\nå¸‚å ´é æ¸¬ï¼š\n"
    
    if week_change > 5:
        prediction = "- çŸ­æœŸè¶¨å‹¢ï¼šåƒ¹æ ¼è™•æ–¼ä¸Šæ¼²é€šé“ï¼ŒçŸ­æœŸå…§å¯èƒ½ç¹¼çºŒä¸Šæ¼²"
    elif week_change < -5:
        prediction = "- çŸ­æœŸè¶¨å‹¢ï¼šåƒ¹æ ¼è™•æ–¼ä¸‹è·Œé€šé“ï¼ŒçŸ­æœŸå…§å¯èƒ½ç¹¼çºŒä¸‹è·Œ"
    else:
        prediction = "- çŸ­æœŸè¶¨å‹¢ï¼šåƒ¹æ ¼ç›¸å°ç©©å®šï¼ŒçŸ­æœŸå…§å¯èƒ½åœ¨ç•¶å‰æ°´å¹³æ³¢å‹•"
    
    report += prediction + "\n"
    
    # æ³¢å‹•æ€§åˆ†æ
    if volatility > 10:
        report += "- æ³¢å‹•åˆ†æï¼šåƒ¹æ ¼æ³¢å‹•è¼ƒå¤§ï¼Œå¸‚å ´ä¸ç¢ºå®šæ€§é«˜\n"
    elif volatility > 5:
        report += "- æ³¢å‹•åˆ†æï¼šåƒ¹æ ¼æ³¢å‹•é©ä¸­ï¼Œå±¬æ–¼æ­£å¸¸å¸‚å ´æ³¢å‹•\n"
    else:
        report += "- æ³¢å‹•åˆ†æï¼šåƒ¹æ ¼æ³¢å‹•è¼ƒå°ï¼Œå¸‚å ´ç›¸å°ç©©å®š\n"
    
    # è³¼è²·å»ºè­°
    report += "- è³¼è²·å»ºè­°ï¼š"
    if week_change < -3:
        report += "åƒ¹æ ¼è¶¨å‹¢å‘ä¸‹ï¼Œå¯èƒ½æ˜¯åˆé©çš„è³¼è²·æ™‚æ©Ÿ\n"
    elif week_change > 3:
        report += "åƒ¹æ ¼è¶¨å‹¢å‘ä¸Šï¼Œå¯è€ƒæ…®ç­‰å¾…åƒ¹æ ¼å›è½å¾Œå†è³¼è²·\n"
    else:
        report += "åƒ¹æ ¼ç›¸å°ç©©å®šï¼Œå¯æ ¹æ“šéœ€è¦è³¼è²·\n"
    
    return report

# è¼”åŠ©å‡½æ•¸ï¼šåˆ†æåƒ¹æ ¼è¶¨å‹¢ä¸¦è¿”å›æè¿°
def _price_trend_description(prices):
    if len(prices) < 2:
        return "æ•¸æ“šä¸è¶³ä»¥åˆ†æè¶¨å‹¢"
    
    # è¨ˆç®—æœ€è¿‘7å¤©çš„è¶¨å‹¢
    recent_prices = prices[-7:] if len(prices) >= 7 else prices
    price_changes = [recent_prices[i+1]["price"] - recent_prices[i]["price"] for i in range(len(recent_prices)-1)]
    
    # åˆ¤æ–·è¶¨å‹¢
    up_changes = sum(1 for change in price_changes if change > 0)
    down_changes = sum(1 for change in price_changes if change < 0)
    flat_changes = len(price_changes) - up_changes - down_changes
    
    if up_changes > len(price_changes) * 0.65:
        return "æ˜é¡¯ä¸Šæ¼²è¶¨å‹¢"
    elif down_changes > len(price_changes) * 0.65:
        return "æ˜é¡¯ä¸‹è·Œè¶¨å‹¢"
    elif up_changes > down_changes and up_changes > flat_changes:
        return "è¼•å¾®ä¸Šæ¼²è¶¨å‹¢"
    elif down_changes > up_changes and down_changes > flat_changes:
        return "è¼•å¾®ä¸‹è·Œè¶¨å‹¢"
    else:
        return "åƒ¹æ ¼ç›¸å°ç©©å®š"

if __name__ == "__main__":
    mcp.run()
```

### 2.æ¸¬è©¦

ä½¿ç”¨ `mcp dev` ä¾†æ¸¬è©¦
åŸ·è¡Œå¾Œæœƒçœ‹åˆ°ä¸€è¡Œ output
`ğŸ” MCP Inspector is up and running at http://localhost:5173 ğŸš€`
ä»£è¡¨æˆåŠŸ! é€™æ™‚å¯ä»¥æ‰“é–‹é€™å€‹ MCP Inspector

```bash
mcp dev fruit_price_server.py
```

{% darrellImage800 cursor_mcp_server-dev-mcp_inspector_part_1 cursor_mcp_server-dev-mcp_inspector_part_1.png max-800 %}

é€™è£¡ç”¨ Tools èˆ‰ä¾‹
å¯ä»¥çœ‹åˆ°é€™è£¡åˆ—å‡ºçš„ Tools å°±æ˜¯ç¨‹å¼ç¢¼é‚£é‚Šæœ‰ä½¿ç”¨çš„ `get_price_chart`
ä½†è²Œä¼¼è¼¸å‡ºæ²’æœ‰çœŸçš„çµ¦åœ–è¡¨ï¼Œè€Œæ˜¯çµ¦åˆ†æ
é€™å°±æ˜¯æœªä¾†å¯ä»¥ç¹¼çºŒå„ªåŒ–èª¿æ•´çš„åœ°æ–¹

åŸæœ¬ä»–æ˜¯æƒ³è¦ç”¨å¥—ä»¶ä¾†ç¹ªè£½åœ–è¡¨
ä½†æ¸¬è©¦å¾Œç™¼ç¾åœ¨ Claude Desktop ä¸Šä¹Ÿä¸æœƒç›´æ¥å‘ˆç¾åœ–è¡¨
ä»–æœƒè®€å–åœ–è¡¨å¾Œï¼Œå†çµ¦åˆ†æè³‡æ–™
æ‰€ä»¥ç¹ªè£½åœ–è¡¨é€™é‚Šæœªä¾†é‚„èƒ½æ€è€ƒæ€éº¼è§£æ±º
ç›®å‰å°±æ˜¯è«‹ Claude Desktop å…ˆç”¨ä»–çš„æ–¹å¼ç¹ªåœ–

{% darrellImage800 cursor_mcp_server-dev-mcp_inspector_part_2 cursor_mcp_server-dev-mcp_inspector_part_2.png max-800 %}

### 3.å®‰è£åˆ° Claude Desktop

ç¢ºèªåŠŸèƒ½æ­£å¸¸å¾Œï¼Œå°‡å¯ä»¥å®‰è£åˆ° Claude Desktop

```bash
mcp install fruit_price_server.py
```

æŒ‡ä»¤é‹è¡Œå®Œå¾Œè²Œä¼¼è·‘äº†å€‹å¯‚å¯ï¼Œä½†å¯¦éš›ä¸Šæ‡‰è©²å·²ç¶“æˆåŠŸäº†
é€™æ™‚å€™é‡å•Ÿ Claude Desktop 
é»é–‹å·¥å…·çš„åœ–æ¡ˆï¼Œæª¢æŸ¥æœ‰æ²’æœ‰é€™å€‹ MCP

{% darrellImage800 cursor_mcp_server-check_mcp_running_on_claude_desktop cursor_mcp_server-check_mcp_running_on_claude_desktop.png max-800 %}

æœ‰çš„è©±ï¼Œé‚£å°±ä¾†é–‹å§‹æ¸¬è©¦

{% darrellImage800 cursor_mcp_server-claude_desktop_testing cursor_mcp_server-claude_desktop_testing.png max-800 %}

å¯ä»¥çœ‹åˆ°æ•´é«”çš„æ¸¬è©¦è »é †åˆ©çš„ï¼Œä»–æ˜¯çœŸçš„æœƒå…ˆå•Ÿç”¨ MCP å¾Œå†ä¾†å›ç­”
åªæ˜¯å¯æƒœç›®å‰çš„è³‡æ–™æ˜¯æ¨¡æ“¬è³‡æ–™
æœªä¾†å¦‚æœçœŸçš„æ¥ä¸Š API æˆ–ç›¸é—œæ•¸æ“šä¾†æº

æˆ–è¨±èƒ½è®Šæˆä¸€å€‹ä¸éŒ¯çš„è²·èœåƒ¹æ ¼è«®è©¢å°å¹«æ‰‹

### 4.å®‰è£åˆ° Cursor

Cursor çš„è©±æ­¥é©Ÿå°±æœƒæœ‰é»ä¸å¤ªç›¸åŒ

é¦–å…ˆæ‰“é–‹ Cursor Settings

é»é–‹ MCP å¾Œæ–°å¢ä¸€å€‹ MCP è¨­å®š

{% darrellImage800 cursor_mcp_server-cursor_install cursor_mcp_server-cursor_install.png max-800 %}

æŒ‡ä»¤ç‚º
```
å®Œæ•´è·¯å¾‘/mcp_env/bin/python å®Œæ•´è·¯å¾‘/fruit_price_server.py
```

ç”±æ–¼æˆ‘å€‘çš„ç”¨çš„æ˜¯ venv è™›æ“¬ç’°å¢ƒï¼Œéœ€è¦ç›´æ¥æŒ‡å®šè™›æ“¬ç’°å¢ƒçš„ python å’Œ server.py çš„è·¯å¾‘
æˆåŠŸå¾Œæœƒçœ‹åˆ°ç¶ ç‡ˆ

æ¸¬è©¦çš„è©±å¯ä»¥å›åˆ° Cursor çš„ Agent ç›´æ¥ä¸‹æŒ‡ä»¤
Cursor ä¸€æ¨£æœƒå•ä½ æ˜¯ä¸æ˜¯è¦æ‰ç”¨æ°´æœåƒ¹æ ¼çš„ MCP

{% darrellImage800 cursor_mcp_server-cursor_testing cursor_mcp_server-cursor_testing.png max-800 %}

çœ‹åˆ°çµæœå¾Œä»£è¡¨æˆåŠŸ!

## å¾ŒçºŒçš„æ–¹å‘

ä»¥é€™å€‹æ¸¬è©¦çš„æƒ…å¢ƒä¾†èªª
å¯ä»¥é€²ä¸€æ­¥æ“´å±•é€™å€‹è”¬æœåƒ¹æ ¼æŸ¥è©¢æœå‹™ï¼š

1. **æ•¸æ“šä¾†æº** - å¾çœŸå¯¦ API ç²å–åƒ¹æ ¼æ•¸æ“š
2. **æ›´è±å¯Œçš„åˆ†æ** - æ·»åŠ åƒ¹æ ¼é æ¸¬ã€è¶¨å‹¢åˆ†æç­‰åŠŸèƒ½

## çµè«–

é€™æ˜¯ä¸€æ¬¡å¥½ç©çš„ Learning by Doing æ¡ˆä¾‹
æˆ‘å¾ŒçºŒæœ‰æˆåŠŸåšä¸€å€‹ MCP æ˜¯å¯ä»¥ä¸²æ¥è‡ªå·±çš„ GA4 æ•¸æ“šï¼Œä¸¦ç›´æ¥åšç›¸é—œçš„åˆ†æ(ç†±é–€ç¶²é ã€ä¾†æºç­‰ç­‰)
ä½†é€™ä¸æ˜¯ä¸€å€‹éå¸¸æ­£ç¢ºçš„åšæ³•ï¼Œå°±ä¸æœƒç‰¹åˆ¥ä»‹ç´¹æ€éº¼åš

åŸå› æ˜¯å¦‚æœ GA4 æ˜¯å€‹äººçš„æ•¸æ“šé‚£é‚„æ²’é—œä¿‚
ä½†è¦æ˜¯æœ‰äººä¸å°å¿ƒç”¨äº†å…¬å¸æˆ–å•†ç”¨çš„å¸³è™Ÿåœ¨åšé€™ç¨®åˆ†æï¼Œå°±æœƒæœ‰å¾ˆå¤šè³‡æ–™æ´©æ¼çš„æ•æ„Ÿå•é¡Œ
æœªä¾†é‡å°é€™å€‹ä¸»é¡Œä¹Ÿæœƒä»‹ç´¹æ¯”è¼ƒå¥½çš„åšæ³•!

MCP Server åªæ˜¯æƒ³è¦ç©ç©çœ‹çœŸå¯¦ä¸²æ¥ API çš„è©±æœƒæ˜¯ä»€éº¼æ„Ÿè¦º

## åƒè€ƒè³‡æ–™

- [Claude Model Context Protocol (MCP) å®˜æ–¹æ–‡ä»¶](https://docs.anthropic.com/en/docs/agents-and-tools/mcp)
- [Python FastMCP æ–‡ä»¶](https://modelcontextprotocol.io/)
- [MCP Example Servers](https://modelcontextprotocol.io/examples)
